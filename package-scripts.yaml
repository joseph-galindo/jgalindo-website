scripts:
  # Top level util scripts
  clean: 
    default: rm -rf build/
    dependencies: rm -rf node_modules/ && pnpm i

  # Build scripts
  build:
    default: nps clean && nps build.node
    node: webpack --env.target=node --mode=development
  dist:
    default: nps clean && nps dist.node
    node: webpack --env.target=node --mode=production

  # Local development scripts
  watch:
    default: >-
      nps clean &&
      concurrently "nps watch.nodeBundle" "nps watch.nodeServer"
    nodeBundle: webpack --watch --env.target=node --mode=development
    nodeServer: nodemon --exec "node ."